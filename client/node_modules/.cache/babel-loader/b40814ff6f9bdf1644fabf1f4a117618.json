{"ast":null,"code":"function checkRow(data, width, y) {\n  for (var x = 0, index = 4 * y * width; x < width; ++x, index += 4) {\n    if (data[index + 3] !== 0) return false;\n  }\n  return true;\n}\nfunction checkColumn(data, width, x, top, bottom) {\n  var stride = 4 * width;\n  for (var y = top, index = top * stride + 4 * x; y <= bottom; ++y, index += stride) {\n    if (data[index + 3] !== 0) return false;\n  }\n  return true;\n}\nfunction trimCanvas(canvas) {\n  var width = canvas.width,\n    height = canvas.height;\n  var context = canvas.getContext(\"2d\", {\n    willReadFrequently: true\n  });\n  var imageData = context.getImageData(0, 0, width, height);\n  var data = imageData.data;\n  var top = 0;\n  var bottom = height - 1;\n  var left = 0;\n  var right = width - 1;\n  while (top < height && checkRow(data, width, top)) {\n    ++top;\n  }\n  if (top === height) {\n    return {\n      width: 0,\n      height: 0,\n      data: null\n    };\n  }\n  while (checkRow(data, width, bottom)) {\n    --bottom;\n  }\n  while (checkColumn(data, width, left, top, bottom)) {\n    ++left;\n  }\n  while (checkColumn(data, width, right, top, bottom)) {\n    --right;\n  }\n  width = right - left + 1;\n  height = bottom - top + 1;\n  return {\n    width: width,\n    height: height,\n    data: context.getImageData(left, top, width, height)\n  };\n}\nexport { trimCanvas };","map":null,"metadata":{},"sourceType":"module"}