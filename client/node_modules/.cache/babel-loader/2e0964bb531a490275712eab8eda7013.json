{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"C:\\\\Users\\\\97150\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\nvar _createClass = require(\"C:\\\\Users\\\\97150\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar runner = require('@pixi/runner');\nvar BaseTexture = require('../textures/BaseTexture.js');\nvar DepthResource = require('../textures/resources/DepthResource.js');\nvar constants = require('@pixi/constants');\nvar Framebuffer = /*#__PURE__*/function () {\n  function Framebuffer(width, height) {\n    _classCallCheck(this, Framebuffer);\n    this.width = Math.round(width || 100);\n    this.height = Math.round(height || 100);\n    this.stencil = false;\n    this.depth = false;\n    this.dirtyId = 0;\n    this.dirtyFormat = 0;\n    this.dirtySize = 0;\n    this.depthTexture = null;\n    this.colorTextures = [];\n    this.glFramebuffers = {};\n    this.disposeRunner = new runner.Runner(\"disposeFramebuffer\");\n    this.multisample = constants.MSAA_QUALITY.NONE;\n  }\n  _createClass(Framebuffer, [{\n    key: \"addColorTexture\",\n    value: function addColorTexture() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var texture = arguments.length > 1 ? arguments[1] : undefined;\n      this.colorTextures[index] = texture || new BaseTexture.BaseTexture(null, {\n        scaleMode: constants.SCALE_MODES.NEAREST,\n        resolution: 1,\n        mipmap: constants.MIPMAP_MODES.OFF,\n        width: this.width,\n        height: this.height\n      });\n      this.dirtyId++;\n      this.dirtyFormat++;\n      return this;\n    }\n  }, {\n    key: \"addDepthTexture\",\n    value: function addDepthTexture(texture) {\n      this.depthTexture = texture || new BaseTexture.BaseTexture(new DepthResource.DepthResource(null, {\n        width: this.width,\n        height: this.height\n      }), {\n        scaleMode: constants.SCALE_MODES.NEAREST,\n        resolution: 1,\n        width: this.width,\n        height: this.height,\n        mipmap: constants.MIPMAP_MODES.OFF,\n        format: constants.FORMATS.DEPTH_COMPONENT,\n        type: constants.TYPES.UNSIGNED_SHORT\n      });\n      this.dirtyId++;\n      this.dirtyFormat++;\n      return this;\n    }\n  }, {\n    key: \"enableDepth\",\n    value: function enableDepth() {\n      this.depth = true;\n      this.dirtyId++;\n      this.dirtyFormat++;\n      return this;\n    }\n  }, {\n    key: \"enableStencil\",\n    value: function enableStencil() {\n      this.stencil = true;\n      this.dirtyId++;\n      this.dirtyFormat++;\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(width, height) {\n      width = Math.round(width);\n      height = Math.round(height);\n      if (width === this.width && height === this.height) return;\n      this.width = width;\n      this.height = height;\n      this.dirtyId++;\n      this.dirtySize++;\n      for (var i = 0; i < this.colorTextures.length; i++) {\n        var texture = this.colorTextures[i];\n        var resolution = texture.resolution;\n        texture.setSize(width / resolution, height / resolution);\n      }\n      if (this.depthTexture) {\n        var _resolution = this.depthTexture.resolution;\n        this.depthTexture.setSize(width / _resolution, height / _resolution);\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.disposeRunner.emit(this, false);\n    }\n  }, {\n    key: \"destroyDepthTexture\",\n    value: function destroyDepthTexture() {\n      if (this.depthTexture) {\n        this.depthTexture.destroy();\n        this.depthTexture = null;\n        ++this.dirtyId;\n        ++this.dirtyFormat;\n      }\n    }\n  }, {\n    key: \"colorTexture\",\n    get: function get() {\n      return this.colorTextures[0];\n    }\n  }]);\n  return Framebuffer;\n}();\nexports.Framebuffer = Framebuffer;","map":null,"metadata":{},"sourceType":"script"}